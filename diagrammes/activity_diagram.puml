@startuml
!theme plain
title Diagramme d'Activité - Processus de Réservation

start

:Utilisateur accède à la plateforme;
:Consulte la liste des services;

if (Utilisateur connecté ?) then (non)
  :Redirection vers page de connexion;
  :Saisie identifiants;
  if (Identifiants valides ?) then (non)
    :Affichage message d'erreur;
    stop
  else (oui)
    :Connexion réussie;
  endif
else (oui)
endif

:Sélection du prestataire;
:Consultation des créneaux disponibles;

fork
  :Réservation classique;
  :Sélection date et heure;
fork again
  :Réservation par créneaux;
  :Sélection créneau prédéfini;
end fork

:Vérification disponibilité;

if (Créneau disponible ?) then (non)
  :Affichage message d'indisponibilité;
  :Proposition d'autres créneaux;
  stop
else (oui)
endif

:Création de la réservation;
:Calcul du montant;

if (Service payant ?) then (oui)
  :Sélection méthode de paiement;
  
  fork
    :Paiement Stripe;
  fork again
    :Paiement Razorpay;
  fork again
    :Paiement Payzone;
  end fork
  
  :Traitement du paiement;
  
  if (Paiement réussi ?) then (non)
    :Annulation réservation;
    :Message d'erreur paiement;
    stop
  else (oui)
    :Confirmation paiement;
  endif
else (non)
endif

:Envoi email de confirmation;
:Mise à jour du planning;
:Notification au prestataire;

:Affichage confirmation à l'utilisateur;

stop

@enduml