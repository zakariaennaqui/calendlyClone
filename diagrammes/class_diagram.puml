@startuml
!theme plain
title Diagramme de Classes - Modèles de Données

class User {
  +_id: ObjectId
  +name: String
  +email: String
  +password: String
  +image: String
  +address: Object
  +gender: String
  +dob: String
  +phone: String
  --
  +register()
  +login()
  +updateProfile()
  +bookAppointment()
}

class Service {
  +_id: ObjectId
  +name: String
  +email: String
  +password: String
  +image: String
  +speciality: String
  +degree: String
  +experience: String
  +about: String
  +available: Boolean
  +fees: Number
  +address: Object
  +slots_booked: Object
  --
  +register()
  +login()
  +manageSchedule()
  +createEvent()
}

class Appointment {
  +_id: ObjectId
  +userId: String
  +docId: String
  +slotDate: String
  +slotTime: String
  +userData: Object
  +docData: Object
  +amount: Number
  +date: Number
  +cancelled: Boolean
  +payment: Boolean
  +isCompleted: Boolean
  --
  +create()
  +cancel()
  +complete()
}

class Event {
  +_id: ObjectId
  +title: String
  +description: String
  +location: String
  +startDate: Date
  +endDate: Date
  +maxParticipants: Number
  +registrationDeadline: Date
  +isFree: Boolean
  +price: Number
  +serviceId: String
  +participants: Array
  --
  +create()
  +register()
  +cancel()
}

class PromoCode {
  +_id: ObjectId
  +code: String
  +serviceId: String
  +discountType: String
  +discountValue: Number
  +usageLimit: Number
  +usagePerUser: Number
  +validFrom: Date
  +validUntil: Date
  +usedBy: Array
  +totalUsed: Number
  +isActive: Boolean
  --
  +validate()
  +apply()
}

class CalendarSlot {
  +_id: ObjectId
  +serviceId: String
  +date: String
  +startTime: String
  +endTime: String
  +duration: Number
  +isActive: Boolean
  +isBooked: Boolean
  +bookedBy: String
  +bookingData: Object
  +amount: Number
  +payment: Boolean
  +cancelled: Boolean
  +isCompleted: Boolean
  --
  +book()
  +cancel()
  +complete()
}

class CalendarConfig {
  +_id: ObjectId
  +serviceId: String
  +defaultDuration: Number
  +workingDays: Array
  +workingHours: Object
  +breakTimes: Array
  +isActive: Boolean
  --
  +configure()
  +generateSlots()
}

' Relations
User ||--o{ Appointment : "fait"
Service ||--o{ Appointment : "reçoit"
Service ||--o{ Event : "organise"
Service ||--o{ PromoCode : "crée"
Service ||--o{ CalendarSlot : "gère"
Service ||--|| CalendarConfig : "configure"
User }o--o{ Event : "participe"
User ||--o{ CalendarSlot : "réserve"

@enduml