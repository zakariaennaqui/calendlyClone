@startuml
!theme plain
title Diagramme de Séquence - Inscription Prestataire

actor "Prestataire" as Provider
participant "Frontend Admin" as FE
participant "Backend API" as API
participant "Base de Données" as DB
participant "Service Email" as Email
participant "Cloudinary" as Cloud

Provider -> FE: Remplit formulaire inscription
FE -> API: POST /api/service/register-step1
API -> DB: Vérifie email unique
DB --> API: Email disponible

API -> Cloud: Upload image profil
Cloud --> API: URL image

API -> DB: Génère et stocke OTP
DB --> API: OTP créé

API -> Email: Envoie OTP par email
Email --> Provider: Email avec code OTP
API --> FE: Demande vérification OTP

Provider -> FE: Saisit code OTP
FE -> API: POST /api/service/register-step2
API -> DB: Vérifie OTP
DB --> API: OTP valide

API -> DB: Crée compte prestataire
DB --> API: Compte créé (statut: en attente)
API --> FE: Inscription réussie
FE --> Provider: Message de confirmation

note right of Provider
  Le compte est créé mais 
  nécessite validation admin
end note

@enduml